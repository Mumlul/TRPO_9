<Page x:Class="TRPO_8.Pages.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:TRPO_8.Pages"
      mc:Ignorable="d" 
      Title="MainPage"
      Background="{DynamicResource WindowBackgroundBrush}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Column="0" Grid.Row="0" Style="{StaticResource SectionBorder}" Name="Info">
            <StackPanel>
                <TextBlock Text="Текущий доктор"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Style="{StaticResource PrimaryTextBlock}"/>
                <StackPanel>
                    <DockPanel>
                        <TextBlock Text="Фамилия:"  Style="{StaticResource SecondaryTextBlock}"/>
                        <TextBlock Text="{Binding LastName}" Style="{StaticResource PrimaryTextBlock}"/>
                    </DockPanel>
                    <DockPanel>
                        <TextBlock Text="Имя:"  Style="{StaticResource SecondaryTextBlock}"/>
                        <TextBlock Text="{Binding Name}" Style="{StaticResource PrimaryTextBlock}"/>
                    </DockPanel>
                    <DockPanel>
                        <TextBlock Text="Отчество:"  Style="{StaticResource SecondaryTextBlock}"/>
                        <TextBlock Text="{Binding MiddleName}" Style="{StaticResource PrimaryTextBlock}"/>
                    </DockPanel>
                    <DockPanel>
                        <TextBlock Text="Специальность:"  Style="{StaticResource SecondaryTextBlock}"/>
                        <TextBlock Text="{Binding Specialisation}" Style="{StaticResource PrimaryTextBlock}"/>
                    </DockPanel>
                </StackPanel>
            </StackPanel>
        </Border>

        
        <Border Grid.Row="1" Grid.ColumnSpan="3" Style="{StaticResource SectionBorder}" Name="ll">
            <ListView ItemsSource="{Binding Patients}"
                      SelectedItem="{Binding SelectedPatient}"
                      MouseDoubleClick="Add_Reception"
                      Style="{StaticResource MainListView}">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource ListItemBorder}">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Идентификатор: " Style="{StaticResource SecondaryTextBlock}"/>
                                    <TextBlock Text="{Binding ID}" Style="{StaticResource PrimaryTextBlock}"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ФИО: " Style="{StaticResource SecondaryTextBlock}"/>
                                    <TextBlock Text="{Binding FullName}" Style="{StaticResource PrimaryTextBlock}"/>

                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Дата рождения: " Style="{StaticResource SecondaryTextBlock}"/>
                                    <TextBlock Text="{Binding BirthDate}" Style="{StaticResource PrimaryTextBlock}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                        
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Border>

        
        <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" Style="{StaticResource ButtonPanel}">
            <Button Content="Добавить пациента"
                    Style="{StaticResource AddButton}"
                    Click="ButtonBase_OnClick"/>
            <Button Content="Изменить данные"
                    Style="{StaticResource MainButton}"
                    Click="Change_data"/>
            <Button Content="Удалить"
                    Style="{StaticResource DeleteButton}"
                    Click="DeletePatient"
                    />
        </StackPanel>

        
        <Border Grid.Row="3"
                Grid.Column="0"
                Grid.ColumnSpan="3"
                Style="{StaticResource StatisticBar}"
                Name="Statistic">
            <DockPanel HorizontalAlignment="Center">
                <TextBlock Text="Докторов в системе: "
                           Style="{StaticResource SecondaryTextBlock}" />
                <TextBlock Text="{Binding CountDoctors}"
                           Style="{StaticResource PrimaryTextBlock}" />
                <TextBlock Text="   Пациентов в системе: "
                           Style="{StaticResource SecondaryTextBlock}" />
                <TextBlock Text="{Binding CountPatients}"
                           Style="{StaticResource PrimaryTextBlock}" />
            </DockPanel>
        </Border>
    </Grid>
</Page>